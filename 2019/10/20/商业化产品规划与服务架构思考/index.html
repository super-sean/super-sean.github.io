<!DOCTYPE html><html><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>商业化产品规划与服务架构思考 | Sean's Blog</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/8.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"><link rel="alternate" type="application/atom+xml" href="/atom.xml"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">商业化产品规划与服务架构思考</h1><a id="logo" href="/.">Sean's Blog</a><p class="description">随性随心</p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> Home</i></a><a href="/archives/"><i class="fa fa-archive"> Archive</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">商业化产品规划与服务架构思考</h1><div class="post-meta">Oct 20, 2019</div><div class="post-content"><h3 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h3><p>近来有幸负责了公司自己部门一个商业化小组的研发事项，结合自己的工作经验对产品将来走向和服务架构规划梳理自己的见解，希望可以让小组目标一致，高效地进行积累进行沉淀。  </p>
<h3 id="业务理解及规划"><a href="#业务理解及规划" class="headerlink" title="业务理解及规划"></a>业务理解及规划</h3><p>按个人愚见商业化前期主要分为几个核心模块，GMV短期快速增长/基础设施搭建/用户消费习惯培养/渠道引流变现能力，每个模块并非独立，而是相互交叉相互依赖。</p>
<ul>
<li><p>GMV短期快速增长是团队运作过程中常见的场景，单独划分模块往往是因为支持团队在指定时间内可以达到相应指标而需要低成本快速支持运营手段达到指标。其中需要流量管控/活动属性管控/玩法沉淀配套/交易流程动态调整营销策略  </p>
</li>
<li><p>基础设施主是为实现商业化整套玩法的服务支撑，包括并不限于流量入口/交易流程/会员体系/特权体系/积分体系/活动体系/营销体系/租赁体系等  </p>
</li>
<li><p>用户消费习惯培养主要需要对用户进行分层，需要在数据层面制定好分析模型，统一业务指标数据字典及统计口径，在研发过程预留足够的空间给后期分析。</p>
</li>
<li><p>渠道引流变现一般为与外部渠道，通过流量付费或利益分成的形式进行合作  </p>
</li>
</ul>
<img src="/2019/10/20/商业化产品规划与服务架构思考/busi_product_module.png" title="业务常见架构">  
<h3 id="团队行事基准"><a href="#团队行事基准" class="headerlink" title="团队行事基准"></a>团队行事基准</h3><p>各行各业，不同的团队行事基准可能很多不同，但是基本都离开不了一种通用原则，领域模型。积累方法论及实践方法，抽象领域分析模型及执行策略。团队就以此进行需求迭代，产品研发，运营事项及日常工作交流指导。  </p>
<p>领域模型一般两种来源，专家或行业通用模型修改加上经验积累。大多数公司不像大厂会有专门的专家，绝大多数公司更是没有领域模型的发展概念。  </p>
<p>领域模型一般先按团队内对产品理解较深的人制定第一版框架，后续不停通过迭代优化。前期可选择通用模型进行指标组建，再细化模块。如决策可尝试使用SWOT，人人都会的RFM用户分层模型（事实上维度选择及划分非常有学问），用户行为漏斗分析模型，盘面分析模型等。盘面分析及用户行为分析是最基本。</p>
<p>简单举个例子，通过接口数据发现付费转化率低（貌似产品同学还没留意这个指标），即发起了预下单，但是却没有最终成功支付，那猜测主要要嘛是付费内容质量问题，要嘛是充值流程问题，那可以从用户到底有没有充值来判断，然后进行下步策略。</p>
<img src="/2019/10/20/商业化产品规划与服务架构思考/data_exam.png" title="data_exam">  
<p>当然有理论支撑之后，必须在基础设施上能支持得上，在研发过程需要预埋一些点。</p>
<h3 id="技术服务架构"><a href="#技术服务架构" class="headerlink" title="技术服务架构"></a>技术服务架构</h3><p>有以上前提的理解下，对总体的服务架构进行了个初步的划分</p>
<img src="/2019/10/20/商业化产品规划与服务架构思考/busi_server_structure.png" title="server_str">  
<h4 id="业务网关"><a href="#业务网关" class="headerlink" title="业务网关"></a>业务网关</h4><p>负责外部交互，web对应http rest, as是我们公司自己封装的一套通信交互标准,消息网关用于与公司其它内部服务通信。  </p>
<p>在这一层，需要注意的是协议层的相关模型定义，整个系统对内对外通信，吸取DDD的指导思想，定义好业务领域模型。一家公司发展到一定程度之后，代码功能模块会经过很多人维护研发，想保证成本（结构封装，接口适配、沟通学习等），就必须梳理沉淀相关的业务领域模型，不然越往后越难控制。  </p>
<p>除了定义模型，协议规范也是必须，请求体/返回体结构、状态码约定、分页/聚合/规则查询方式等。</p>
<h4 id="商业化核心服务"><a href="#商业化核心服务" class="headerlink" title="商业化核心服务"></a>商业化核心服务</h4><h5 id="商业化通用逻辑"><a href="#商业化通用逻辑" class="headerlink" title="商业化通用逻辑"></a>商业化通用逻辑</h5><p>可以看到在商业化发展过程中可以抽象的服务其实有可能会很多，可以有一个汇总服务，作为母体孵化其它模块，当达到比较成熟或遇到业务机遇时可进行抽离独立。  </p>
<h5 id="服务间的通信"><a href="#服务间的通信" class="headerlink" title="服务间的通信"></a>服务间的通信</h5><h6 id="领域模型事件驱动"><a href="#领域模型事件驱动" class="headerlink" title="领域模型事件驱动"></a>领域模型事件驱动</h6><p>服务只关注领域内事项处理，将处理结果通过消息总线广播出去，有需要的服务自行进行定阅，参考ddd的设计理念，在发送消息和解析加入工具包，封装领域模型及相应的事件状态和流程。  </p>
<p>系统规模大了之后往往需要考虑事件流的问题，需要对事件顺序编排，有可能会多个上游依赖的情况，为了避免这种情况，可以只关注核心一个事件，主动查询其它模块结果的处理方式，这样保证了一个事件流是树状结构。  </p>
<p>研发事件管理服务及后台，拿kafka为例，可以在应用层面添加工具包，为producer添加生产标识，consumer添加消费标识，可以用注解和扫描，并发送给事件管理服务，这样事件流的结构就可以被绘画。这样只要稍微做下支持，就可以知道整个事件流每个环节的处理情况，数据统计等，甚至可以自动/人工进行介入消息失败/异常处理策略的实现。  </p>
<p>当然前期可简单的先各个模块自维护各自的消息发送，消费和补偿实现。比如只是定义各自的消息的队列名、结构和行为状态定义，让下游各自监听处理。在服务完善之后再进行迁移。</p>
<h6 id="补偿模块"><a href="#补偿模块" class="headerlink" title="补偿模块"></a>补偿模块</h6><p>凡是依赖消息通知的实现，在完整性和稳定性上考虑，必须加上补偿模块，凡是需要依赖消费事件的服务都需要制定主动询问上流的策略，比如开通会员触发了特权发放，除了正常消息通知以外，特权服务需要主动询问会员服务最近一段时间内有哪些用户开通了会员但是还没发放特权，并进行发放，当然也需要做好幂等控制。  </p>
<p>而补偿也可以像事件流管理平台一样，提供工具包，支持补偿发起者注册到平台上，可以对系统中的补偿行为进行监控以及介入。</p>
<h4 id="基础服务"><a href="#基础服务" class="headerlink" title="基础服务"></a>基础服务</h4><p>一般商业化会需要一些基础服务支撑，这一层会尽量剥离业务特性，专注专业领域上的研发。本文主要介绍业务层面的实现，便不多加介绍这一环节。 </p>
<h3 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h3><p>目前在公司内只是把以上的相关业务理解及设计思考与团队的产品/研发同事进行了同步，在每个点上都有相应的积累，但是还是任重而道远，而要独步完善及验证。</p>
<p>今天加油，明天也加油！</p>
</div><div class="tags"><a href="/tags/架构/">架构</a></div><div class="post-nav"><a class="next" href="/2019/09/16/一种serverless的实现方案/">一种serverless的实现方案</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="https://super-sean.github.io"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> Categories</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/JAVA/">JAVA</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/大数据/">大数据</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/设计/">设计</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/随笔/">随笔</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> Tags</i></div><div class="tagcloud"><a href="/tags/spring/" style="font-size: 15px;">spring</a> <a href="/tags/java基础/" style="font-size: 15px;">java基础</a> <a href="/tags/动态解析/" style="font-size: 15px;">动态解析</a> <a href="/tags/JVM/" style="font-size: 15px;">JVM</a> <a href="/tags/内存/" style="font-size: 15px;">内存</a> <a href="/tags/qcon/" style="font-size: 15px;">qcon</a> <a href="/tags/数据平台/" style="font-size: 15px;">数据平台</a> <a href="/tags/ETL/" style="font-size: 15px;">ETL</a> <a href="/tags/分布式/" style="font-size: 15px;">分布式</a> <a href="/tags/实时流/" style="font-size: 15px;">实时流</a> <a href="/tags/mybatis/" style="font-size: 15px;">mybatis</a> <a href="/tags/kafka/" style="font-size: 15px;">kafka</a> <a href="/tags/zookeeper/" style="font-size: 15px;">zookeeper</a> <a href="/tags/队列/" style="font-size: 15px;">队列</a> <a href="/tags/JAVA基础/" style="font-size: 15px;">JAVA基础</a> <a href="/tags/优化/" style="font-size: 15px;">优化</a> <a href="/tags/设计模式/" style="font-size: 15px;">设计模式</a> <a href="/tags/架构/" style="font-size: 15px;">架构</a> <a href="/tags/数据分析/" style="font-size: 15px;">数据分析</a> <a href="/tags/并发编程/" style="font-size: 15px;">并发编程</a> <a href="/tags/serviceless/" style="font-size: 15px;">serviceless</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> Recent</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2019/10/20/商业化产品规划与服务架构思考/">商业化产品规划与服务架构思考</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/09/16/一种serverless的实现方案/">一种serverless的实现方案</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/07/14/Qcon广州站大会个人纪要/">Qcon广州站</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/07/06/一次App首页代码优化纪要/">一次App首页代码优化纪要</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/05/19/GC问题解决的那些套路/">GC问题解决的那些套路</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/05/15/基于solr服务提供通用配置化接口服务/">基于solr服务提供通用配置化接口服务</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/05/04/long-gc案例分析/">long-gc案例分析</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/02/09/创业团队那些事/">创业团队那些事</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/11/23/datax源码解析及分布式实现思路/">datax源码解析及分布式实现思路</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/10/18/并发编程/">并发编程</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> Links</i></div></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2019 <a href="/." rel="nofollow">Sean's Blog.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>